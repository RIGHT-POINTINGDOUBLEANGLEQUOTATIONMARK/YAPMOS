(()=>new Promise((r,j)=>{if(window.ColorThief)return exec();var s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js';s.onload=exec;s.onerror=()=>j(new Error('Failed to load Color Thief library'));document.head.appendChild(s);function exec(){const i=new Image();const start=Date.now();i.src='%s';i.onload=()=>{try{const c=new ColorThief();r({dominantColor:c.getColor(i),palette:c.getPalette(i,5)});}catch(e){j(new Error('Color extraction failed: '+e.message));}};i.onerror=()=>{const type=i.src.startsWith('data:')?'data URL':'URL';const len=i.src.length;const dur=Date.now()-start;j(new Error(`Failed to load image: ${type}, length ${len}, after ${dur}ms`));};}}))()
